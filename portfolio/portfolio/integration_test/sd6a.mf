; 18649 Fall 2013
; group 17
; Qiang Zhang(qiangz), Shen Yu(sheny)
; sd6a.mf

;network message period
#DEFINE MESSAGE_PERIOD 50ms
#DEFINE ATFLOOR_1F_FRONT_CAN_ID 0xC4C2800
#DEFINE ATFLOOR_2F_FRONT_CAN_ID 0xC4C2802
#DEFINE ATFLOOR_3F_FRONT_CAN_ID 0xC4C2804
#DEFINE ATFLOOR_4F_FRONT_CAN_ID 0xC4C2806
#DEFINE ATFLOOR_5F_FRONT_CAN_ID 0xC4C2808
#DEFINE DESIRED_FLOOR_CAN_ID    0xF0CB600
#DEFINE DOOR_CLOSED_FRONT_RIGHT_CAN_ID 0xD145001

;initialization
0s I MESSAGE_PERIOD N DOOR_CLOSED_FRONT_RIGHT_CAN_ID DoorClosed FRONT RIGHT = true
0s I MESSAGE_PERIOD N ATFLOOR_1F_FRONT_CAN_ID AtFloor 1 FRONT = true
0s I MESSAGE_PERIOD N ATFLOOR_2F_FRONT_CAN_ID AtFloor 2 FRONT = false
0s I MESSAGE_PERIOD N ATFLOOR_3F_FRONT_CAN_ID AtFloor 3 FRONT = false
0s I MESSAGE_PERIOD N ATFLOOR_4F_FRONT_CAN_ID AtFloor 4 FRONT = false
0s I MESSAGE_PERIOD N DOOR_CLOSED_FRONT_RIGHT_CAN_ID DoorClosed FRONT RIGHT = true
0s I MESSAGE_PERIOD N DESIRED_FLOOR_CAN_ID    DesiredFloor = 1 FRONT UP

;set conditions
0.5s I MESSAGE_PERIOD N DESIRED_FLOOR_CAN_ID DesiredFloor = 2 FRONT UP
;#arc '6A/1'
1.0s A F CarPositionIndicator : floor == 1

;#arc '6A/2a'
1.0s A F Drive : speed == SLOW
1.0s A F Drive : direction == UP
1.0s A S DriveControl : STATE == MOVING

;set conditions
1.2s I MESSAGE_PERIOD N ATFLOOR_1F_FRONT_CAN_ID AtFloor 1 FRONT = false

;#arc '6A/3a' '6A/4b'
1.5s I MESSAGE_PERIOD N ATFLOOR_2F_FRONT_CAN_ID AtFloor 2 FRONT = true

;#arc '6A/3b'
2.0s A F Drive : speed == STOP
2.0s A F Drive : direction == STOP

;#arc '6A/4b'
2.0s A F CarPositionIndicator : floor == 2









