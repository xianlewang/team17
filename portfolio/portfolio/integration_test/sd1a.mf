; 18649 Fall 2013
; group 17
; Jiang He(jiangh)
; sd1a.mf


;network message period
#DEFINE MESSAGE_PERIOD 100ms

;mAtFloor
;mAtFloor 1 FRONT ID = 0x0C4C2800 + (1-1)*2 + 0
#DEFINE AT_FLOOR_1F_CAN_ID 0xC4C2800
;mAtFloor 4 FRONT ID = 0x0C4C2800 + (4-1)*2 + 0
#DEFINE AT_FLOOR_4F_CAN_ID 0xC4C2806

;mDesiredFloor
;ID = 0x0F0CB600
#DEFINE DESIRED_FLOOR_CAN_ID 0xF0CB600 

;mDoorClosed
;mDoorClosed FRONT LEFT ID = 0x0D145000 + 0*2 + 0
#DEFINE DOOR_CLOSED_FL_CAN_ID 0xD145000

;mHallCall
;mHallCall 4 FRONT UP ID = 0x0F0FB900 + (4-1)*4 + 0*2 + 0
#DEFINE HALL_CALL_4FU_CAN_ID 0xF0FB90C

;mHallLight
;mHallLight 4 FRONT UP ID = 0x0F10B900 + (4-1)*4 + 0*2 + 0
#DEFINE HALL_LIGHT_4FU_CAN_ID 0xF10B90C


;intialize 

0s I MESSAGE_PERIOD N DOOR_CLOSED_FL_CAN_ID DoorClosed FRONT LEFT = true
0s I MESSAGE_PERIOD N AT_FLOOR_1F_CAN_ID AtFloor 1 FRONT = true



;****verify precondition
0.5s A N AT_FLOOR_1F_CAN_ID AtFloor 1 FRONT : getValue == true
0.5s A F HallLight 4 FRONT UP : lighted == false


;#arc '1A/1a'
;#arc '1A/1b'
1s I MESSAGE_PERIOD F HallCall 4 FRONT UP  = true
;#arc '1A/2a'
;#arc '1A/2b'
1.5s A F HallLight 4 FRONT UP : lighted == true

;****verify postcondition
2s A N AT_FLOOR_4F_CAN_ID AtFloor 4 FRONT : getValue == false
2s A N DOOR_CLOSED_FL_CAN_ID DoorClosed FRONT LEFT : getValue == true
2s A F HallLight 4 FRONT UP : lighted == true
