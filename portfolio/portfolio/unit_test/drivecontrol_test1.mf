;18649 2013
;Group 17 
;Member Name: Jiang He  Andrew ID: jiangh
;drivecontrol_unittest_new.mf

#INCLUDE drive_defines.mf ;include CAN ID and Period Definations
;initialize
0s I MESSAGE_PERIOD N AT_FLOOR_[1][FRONT]_CAN_ID AtFloor 1 FRONT = false
0s I MESSAGE_PERIOD N AT_FLOOR_[1][BACK]_CAN_ID AtFloor 1 BACK = false
0s I MESSAGE_PERIOD N AT_FLOOR_[2][BACK]_CAN_ID AtFloor 2 BACK = false
0s I MESSAGE_PERIOD N AT_FLOOR_[3][FRONT]_CAN_ID AtFloor 3 FRONT = true
0s I MESSAGE_PERIOD N AT_FLOOR_[4][FRONT]_CAN_ID AtFloor 4 FRONT = false
0s I MESSAGE_PERIOD N AT_FLOOR_[5][FRONT]_CAN_ID AtFloor 5 FRONT = false
0s I MESSAGE_PERIOD N AT_FLOOR_[6][FRONT]_CAN_ID AtFloor 6 FRONT = false
0s I MESSAGE_PERIOD N AT_FLOOR_[7][FRONT]_CAN_ID AtFloor 7 FRONT = false
0s I MESSAGE_PERIOD N AT_FLOOR_[7][BACK]_CAN_ID AtFloor 7 BACK = false
0s I MESSAGE_PERIOD N AT_FLOOR_[8][FRONT]_CAN_ID AtFloor 8 FRONT = false

0s I MESSAGE_PERIOD N LEVEL_SENSOR_[UP]_CAN_ID Leveling UP = true
0s I MESSAGE_PERIOD N LEVEL_SENSOR_[DOWN]_CAN_ID Leveling DOWN = true

0s I MESSAGE_PERIOD N DESIRED_FLOOR_CAN_ID DesiredFloor = 3 FRONT STOP

0s I MESSAGE_PERIOD N DOOR_CLOSED_SENSOR_[FRONT][LEFT]_CAN_ID DoorClosed FRONT LEFT = false
0s I MESSAGE_PERIOD N DOOR_CLOSED_SENSOR_[FRONT][RIGHT]_CAN_ID DoorClosed FRONT RIGHT = true
0s I MESSAGE_PERIOD N DOOR_CLOSED_SENSOR_[BACK][LEFT]_CAN_ID DoorClosed BACK LEFT = true
0s I MESSAGE_PERIOD N DOOR_CLOSED_SENSOR_[BACK][RIGHT]_CAN_ID DoorClosed BACK RIGHT = true

0s I MESSAGE_PERIOD N DOOR_MOTOR_COMMAND_[FRONT][LEFT]_CAN_ID DoorMotor FRONT LEFT = OPEN
0s I MESSAGE_PERIOD N DOOR_MOTOR_COMMAND_[FRONT][RIGHT]_CAN_ID DoorMotor FRONT RIGHT = STOP
0s I MESSAGE_PERIOD N DOOR_MOTOR_COMMAND_[BACK][LEFT]_CAN_ID DoorMotor BACK LEFT = STOP
0s I MESSAGE_PERIOD N DOOR_MOTOR_COMMAND_[BACK][RIGHT]_CAN_ID DoorMotor BACK RIGHT = STOP

; check the Drive is STOP and check STATE is STOP
0.11s A F Drive : speed == STOP
0.11s A N DRIVE_COMMAND_CAN_ID DriveCommand : getSpeed == STOP
0.11s A S DriveControl : STATE == STOP

;set conditins for T6.1
0.35s I MESSAGE_PERIOD N DOOR_CLOSED_SENSOR_[FRONT][LEFT]_CAN_ID DoorClosed FRONT LEFT = false
0.35s I MESSAGE_PERIOD N DOOR_MOTOR_COMMAND_[FRONT][LEFT]_CAN_ID DoorMotor FRONT LEFT = STOP
0.35s I MESSAGE_PERIOD N LEVEL_SENSOR_[UP]_CAN_ID Leveling UP = false

;check Drive is LEVEL UP, mDrive is SLOW UP and STATE is LEVEL UP
1.1s A F Drive : speed == LEVEL
1.1s A F Drive : direction == UP
1.1s A N DRIVE_COMMAND_CAN_ID DriveCommand : getSpeed == LEVEL
1.1s A N DRIVE_COMMAND_CAN_ID DriveCommand : getDirection == UP
1.1s A S DriveControl : STATE == LEVEL_UP

;set conditins for T6.2
1.5s I MESSAGE_PERIOD N LEVEL_SENSOR_[UP]_CAN_ID Leveling UP = true
1.5s I MESSAGE_PERIOD N LEVEL_SENSOR_[DOWN]_CAN_ID Leveling DOWN = true

;check Drive is STOP STOP, mDrive is STOP STOP and STATE is STOP
2s A F Drive : speed == STOP
2s A N DRIVE_COMMAND_CAN_ID DriveCommand : getSpeed == STOP
2s A S DriveControl : STATE == STOP

;set conditins for T6.3
2.5s I MESSAGE_PERIOD N DOOR_MOTOR_COMMAND_[FRONT][LEFT]_CAN_ID DoorMotor FRONT LEFT = STOP
2.5s I MESSAGE_PERIOD N DOOR_MOTOR_COMMAND_[FRONT][RIGHT]_CAN_ID DoorMotor FRONT RIGHT = STOP
2.5s I MESSAGE_PERIOD N DOOR_MOTOR_COMMAND_[BACK][LEFT]_CAN_ID DoorMotor BACK LEFT = STOP
2.5s I MESSAGE_PERIOD N DOOR_MOTOR_COMMAND_[BACK][RIGHT]_CAN_ID DoorMotor BACK RIGHT = STOP

2.5s I MESSAGE_PERIOD N DOOR_CLOSED_SENSOR_[FRONT][LEFT]_CAN_ID DoorClosed FRONT LEFT = true
2.5s I MESSAGE_PERIOD N DOOR_CLOSED_SENSOR_[FRONT][RIGHT]_CAN_ID DoorClosed FRONT RIGHT = true
2.5s I MESSAGE_PERIOD N DOOR_CLOSED_SENSOR_[BACK][LEFT]_CAN_ID DoorClosed BACK LEFT = true
2.5s I MESSAGE_PERIOD N DOOR_CLOSED_SENSOR_[BACK][RIGHT]_CAN_ID DoorClosed BACK RIGHT = true

2.5s I MESSAGE_PERIOD N DESIRED_FLOOR_CAN_ID DesiredFloor = 4 FRONT STOP

2.5s I MESSAGE_PERIOD N AT_FLOOR_[3][FRONT]_CAN_ID AtFloor 3 FRONT = true

;check Drive is SLOW UP, mDrive is SLOW UP and STATE is SLOW_UP
3.3s A F Drive : speed == SLOW
3.3s A F Drive : direction == UP
3.3s A N DRIVE_COMMAND_CAN_ID DriveCommand : getSpeed == SLOW
3.3s A N DRIVE_COMMAND_CAN_ID DriveCommand : getDirection == UP
3.3s A S DriveControl : STATE == SLOW_UP

;set conditins for T6.4
4s I MESSAGE_PERIOD N AT_FLOOR_[3][FRONT]_CAN_ID AtFloor 3 FRONT = false
4s I MESSAGE_PERIOD N AT_FLOOR_[4][FRONT]_CAN_ID AtFloor 4 FRONT = true
4s I MESSAGE_PERIOD N LEVEL_SENSOR_[UP]_CAN_ID Leveling UP = false
4s I MESSAGE_PERIOD N LEVEL_SENSOR_[DOWN]_CAN_ID Leveling DOWN = false

;4s I MESSAGE_PERIOD N HOISTWAY_LIMIT_[UP]_CAN_ID HoistwayLimitSensor = true
;4s I MESSAGE_PERIOD N HOISTWAY_LIMIT_[DOWN]_CAN_ID HoistwayLimitSensor = true
;4s I MESSAGE_PERIOD N EMERGENCY_BRAKE_CAN_ID Boolean = true


;check Drive is LEVEL UP, mDrive is SLOW UP and STATE is LEVEL UP
5s A F Drive : speed == LEVEL
5s A F Drive : direction == UP
5s A N DRIVE_COMMAND_CAN_ID DriveCommand : getSpeed == LEVEL
5s A N DRIVE_COMMAND_CAN_ID DriveCommand : getDirection == UP
5s A S DriveControl : STATE == LEVEL_UP

;set conditins for T6.2
6s I MESSAGE_PERIOD N LEVEL_SENSOR_[UP]_CAN_ID Leveling UP = true
6s I MESSAGE_PERIOD N LEVEL_SENSOR_[DOWN]_CAN_ID Leveling DOWN = true

;check Drive is STOP STOP, mDrive is STOP STOP and STATE is STOP
7s A F Drive : speed == STOP
7s A N DRIVE_COMMAND_CAN_ID DriveCommand : getSpeed == STOP
7s A S DriveControl : STATE == STOP

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;















